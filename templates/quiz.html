{%extends "base.html"%} {%block header%}
<title>Quiz</title>

{%endblock%} {%block body%}
<div class="container">
  <h1>Quiz</h1>
  <ul class="list-group" id="quizbox"></ul>
  <hr />
  <div class="btn-group" role="group" aria-label="Basic outlined example">
    <button
      type="button"
      class="btn btn-outline-primary"
      onclick="gotoPrevQuestion()"
    >
      Prev
    </button>
    <button
      type="button"
      class="btn btn-outline-primary"
      onclick="FinishQuiz()"
    >
      Finish
    </button>
    <button
      type="button"
      class="btn btn-outline-primary"
      onclick="gotoNextQuestion()"
    >
      Next
    </button>
  </div>
  <script>
    var currentQuestionIndex = 0;
    var totalquestions = 0;
    var questions = [];
    // get questions using fetch
    // send questions back to python server
    function renderquestions() {
      totalquestions = questions.length;
      var ele = document.querySelector("#quizbox");
      ele.innerHTML = "";
      var question = questions[currentQuestionIndex];
      ele.innerHTML += `<li class="list-group-item active">${question["question"]}</li>`;
      question["incorrectAnswers"].map((item) => {
        ele.innerHTML += `<li class="list-group-item"><input type="radio" name="q${currentQuestionIndex}"/> ${item}</li>`;
      });
      ele.innerHTML += `<li class="list-group-item"><input type="radio" name="q${currentQuestionIndex}"/> ${question["correctAnswer"]}</li>`;
    }

    function gotoPrevQuestion() {
      if (currentQuestionIndex > 0) currentQuestionIndex -= 1;
      renderquestions();
    }

    function gotoNextQuestion() {
      if (currentQuestionIndex <= totalquestions) currentQuestionIndex += 1;
      renderquestions();
    }

    url = "https://the-trivia-api.com/api/questions";
    fetch(url)
      .then((res) => res.json())
      .then((data) => {
        questions = data;
        renderquestions(data);
      });
  </script>
</div>
{%endblock%}
